import BasePage from './base-component';

export const passwordFormSelector = '[data-cy=password-form]';
export const passwordTitleSelector = '[data-cy=password-title]';
export const currentPasswordSelector = '[data-cy=currentPassword]';
export const newPasswordSelector = '[data-cy=newPassword]';
export const confirmPasswordSelector = '[data-cy=confirmPassword]';

export default class PasswordPage extends BasePage {
    static getSelf() {
        return cy.get(passwordFormSelector);
    }

    static get() {
        return cy.visit('/account/password');
    }

    static getTitleElement() {
        return cy.get(passwordTitleSelector);
    }

    static getCurrentPasswordElement() {
        return cy.get(currentPasswordSelector);
    }

    static getNewPasswordElement() {
        return cy.get(newPasswordSelector);
    }

    static getConfirmPasswordElement() {
        return cy.get(confirmPasswordSelector);
    }

    static getSaveButton() {
        return cy.get('button[type=submit]');
    }

    static getTitle() {
        return this.getTitleElement().invoke('attr', 'id');
    }

    static setCurrentPassword(currentPassword: string) {
        return this.getCurrentPasswordElement().type(currentPassword);
    }

    static clearCurrentPassword() {
        return this.getCurrentPasswordElement().clear();
    }

    static setNewPassword(password: string) {
        return this.getNewPasswordElement().type(password);
    }

    static clearNewPassword() {
        return this.getNewPasswordElement().clear();
    }

    static setConfirmPassword(password: string) {
        return this.getConfirmPasswordElement().type(password);
    }

    static clearConfirmPassword() {
        return this.getConfirmPasswordElement().clear();
    }

    static autoChangePassword(currentPassword: string, newPassword: string, confirmPassword: string) {
        this.setCurrentPassword(currentPassword);
        this.setNewPassword(newPassword);
        this.setConfirmPassword(confirmPassword);
        return this.save();
    }

    static save() {
        this.getSaveButton().click();
    }
}
