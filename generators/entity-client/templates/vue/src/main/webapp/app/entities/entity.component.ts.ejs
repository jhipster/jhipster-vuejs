import Principal from '../../<%_ if (clientRootFolder) { _%>../<%_ } _%>components/account/Principal.vue';
import <%= entityAngularName %>Service from './<%= entityFileName %>.service.vue';

const <%= entityAngularName %> = {
    mixins: [Principal, <%= entityAngularName %>Service],
    data() {
      return {
          removeId: null,
          <%= entityInstance %>s: []
      }
    },
    beforeRouteEnter (to, from, next) {
        next(vm => {
            vm.retrieveAll<%= entityAngularName %>s();
        })
    },
    methods: {
        retrieveAll<%= entityAngularName %>s() {
            let vm = this;
            this.retrieve<%= entityAngularName %>s().then(res => {
                vm.<%= entityInstance %>s = res.data;
            });
        },
        prepareRemove(instance) {
            this.removeId = instance.id;
            this.$refs.removeEntity.show();
        },
        remove<%= entityAngularName %>() {
            let vm = this;
            this.delete<%= entityAngularName %>(vm.removeId).then(() => {
                vm.removeId = null;
                vm.retrieveAll<%= entityAngularName %>s();
                vm.closeDialog();
            });
        },
        closeDialog() {
            this.$refs.removeEntity.hide();
        }
    }
};

export default <%= entityAngularName %>;
